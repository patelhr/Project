language: android
sudo: required
jdk: oraclejdk8
env:
  global:
    - ANDROID_API=24
    - ANDROID_BUILD_TOOLS=24.0.2
android:
 components:
    - tools
    - platform-tools
    - build-tools-24.0.1
    - android-24
    - extra-android-m2repository
    - extra-google-m2repository
before_install:
    - chmod +x gradlew
    - ./gradlew dependencies || true
before_script:
- echo no | android create avd --force -n test -t android-21 --abi armeabi-v7a
- emulator -avd test -no-skin -no-audio -no-window &
- android-wait-for-emulator
- adb shell input keyevent 82 &
script:
    - ./gradlew clean build connectedCheck -PdisablePreDex --stacktrace
deploy:
  provider: releases
  file: "./app/build/outputs/apk/app-release-unsigned.apk"
  skip_cleanup: true

  on:
    repo: patelhr/Project
    tags: true
    jdk: oraclejdk8
  api_key:
    secure: "zmnbdqiBf5e/zdNvZe8X49vkJixmV4tJeF+AF9MHxIyV67o8KHUA3hc+mkq9pGoflXHXDQwum4/tRcreNxUpJX6K8bn/Ku3SNkKOK9eDHK1F5UifgLVEaPxgKnvwKEsVlQUAfqvKznMq+L8ffq1W5ic0BBsKRZvs3OUFvGdE3zIZlgKI1h3gAx3v4a96lHA6wiHhk2Cx0c1uqDzXlo/+h8xeBWy8GQqVlc9khruw2ZVsS/bxE9QpKW6fW+33Pc30k5MMxVGkp8WADZ286hJI0Kh3Fsc1ZEdx+uAgnMNfv+Zg5MhgGNBXcDiMuVPDCKb31Ed5an6TOn6wBrDTZZJlnaTrCwV6uYIcDxh27PYOKaSm/UHsJThTu0/z5CpT+q/RQIlf3cGhJAgGia6cOeu55UkUN2/gfG8/u/o8JoXH0PCLUDAd5bZRUCHPi7L91CX1SX3COzyb1tG2kNbSoBtc+L4O7cKk1crsYkiNVF4hyG4068J4nmxPBvnJljSFz5Bkvenl/6PyaZ5LI9OEo/vbjszav5fseN+0+yPJ5DCCjHeBiHKXCPp4O725o1j+KVvEy9N5JDmj3Dt08pjN61Bv0BWIn8243VzBnC6/krPy4kXQmHdVz+PYn97vVSCCsTFEMeO0Nyx0FwvfcmkCWaM1Y8adKHKwoeS8zy2cV0rmPjU="